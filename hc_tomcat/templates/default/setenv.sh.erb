#!/usr/bin/env sh
#
# setenv.sh
#
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
#
export JAVA_HOME='<%= node['hc_java']['java_home'] %>'
export CATALINA_HOME='<%= node['hc_tomcat']['home'] %>'
export CATALINA_BASE='<%= node['hc_tomcat']['base'] %>'
#export JAVA_OPTS='<%= node['hc_tomcat']['java_options'] %>'
export JAVA_OPTS="<%= node['hc_tomcat']['java_options'] %> -Dconfig=<%=node['hc_tomcat']['idm']['app_prop'] %> -Dapp.tenant.secret=<%=node['hc_tomcat']['idm']['app_config_prop'] %> -Didp.app.tenant=<%=node['hc_tomcat']['idm']['idp_app_tenant_prop'] %> -Dlog4j.configuration=file:<%=node['hc_tomcat']['idm']['log4j_prop'] %> -Dorg.owasp.esapi.resources=<%=node['hc_tomcat']['idm']['resources_path'] %> -DzendeskConfig=<%=node['hc_tomcat']['idm']['zendesk_app_prop'] %>"
export CATALINA_OPTS='<%= node['hc_tomcat']['catalina_options'] %>'
export CATALINA_PID='<%= node['hc_tomcat']['tomcat_home'] %>/tomcat.pid'

<% if node.roles.include?('sso') -%>
#SSO specific JAVA_OPTS 
  export JAVA_OPTS="$JAVA_OPTS -Dconfig=<%= node['hc_tomcat']['idm']['app_prop'] %> -Dapp.tenant.secret=<%= node['hc_tomcat']['idm']['app_config_prop'] %> -Didp.app.tenant=<%= node['hc_tomcat']['idm']['idp_app_tenant_prop'] %> -Dlog4j.configuration=file:<%= node['hc_tomcat']['idm']['log4j_prop'] %> -Dorg.owasp.esapi.resources=<%= node['hc_tomcat']['idm']['resources_path'] %> -DzendeskConfig=<%= node['hc_tomcat']['idm']['zendesk_app_prop'] %>"
<% end -%>
# User-defined Environment variables
<% @node['hc_tomcat']['environment'].each do |envvar| -%>
<%= envvar['VariableName']-%>='<%= envvar['VariableValue']-%>'
<% end -%>
