#!/usr/bin/env sh
#
# setenv.sh
#
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
#
export JAVA_HOME='<%= node['hc_java']['java_home'] %>'
export CATALINA_HOME='<%= node['hc_tomcat']['home'] %>'
export CATALINA_BASE='<%= node['hc_tomcat']['base'] %>'
#export JAVA_OPTS='<%= node['hc_tomcat']['java_options'] %>'
export CATALINA_OPTS='<%= node['hc_tomcat']['catalina_options'] %>'
export CATALINA_PID='<%= node['hc_tomcat']['tomcat_home'] %>/tomcat.pid'
#PHIX CP specific JAVA_OPTS
<% node['roles'].each do |role| -%>
<% if role == 'cp-phix-batch]' -%>
export JAVA_OPTS="$JAVA_OPTS <%= node['hc_tomcat']['phix']['cp']['batch']['java_opts'] %>"
<% end -%>
<% if role == 'cp-phix-app' -%>
export JAVA_OPTS="$JAVA_OPTS <%= node['hc_tomcat']['phix']['cp']['app']['java_opts'] %>"
<% end -%>
<% end -%>
# User-defined Environment variables
<% @node['hc_tomcat']['environment'].each do |envvar| -%>
<%= envvar['VariableName']-%>='<%= envvar['VariableValue']-%>'
<% end -%>

export AWS_KMS_KEY_ALIAS=alias/net/hcinternal/dev/devops
export AWS_KMS_ENCRYPTION_CONTEXT='{"product":"<%= node[:product] %>","tenant":"<%= node[:implementation] %>","stack":"<%= node[:environment] %>","context":"<%= node[:set_fqdn] %>"}'
